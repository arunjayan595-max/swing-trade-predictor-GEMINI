name: 03 Intraday Check

on:
  schedule:
    # Runs at 05:30 UTC (11:00 AM IST) and 08:30 UTC (02:00 PM IST)
    - cron: '30 05,08 * * 1-5'
  workflow_dispatch:

jobs:
  intraday_snapshot:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v4
        with:
          python-version: '3.9'
      - run: pip install -r requirements.txt
      
      # Re-uses the main scanner but could accept an argument like --live
      - name: Run Live Scan
        run: python src/run_scanner.py

      - name: Commit Live Data
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: "âš¡ Auto: Intraday Snapshot [skip ci]"
          file_pattern: 'data/daily/*.json'
